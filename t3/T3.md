# API Тест-кейсы согласно тест-плану T3
Тестируемая функция: REST API **GET** /products/{productId}/cost?authToken=&count=&start=
* Параметризованное тестирование
---
## Группа 1-2: Тестирование логики расчета и округления
### Предусловия:
* Пользователь авторизован и имеет действующий токен аутентификации.
* Токен аутентификации получен и передан в параметр запроса {authToken}.
* Существует валидный productId для тестирования.
### Шаги:
1) Установить значения в параметрах запроса "start" и "count" согласно таблице. (см. "Ожидаемые результаты")
2) Отправить GET-запрос на эндпоинт /products/{productId}/cost?authToken=&count=&start= с указанными параметрами.
### Ожидаемые результаты:

| **Номер** | **Описание теста**              | **start** | **count** | **HTTP-код** | **Body, {"cost": }** |
|-----------|---------------------------------|:---------:|:---------:|:------------:|:--------------------:|
| TC-LOG-1  | 1 экз. -> 5 экз.                |     0     |     1     |     200      |         100          |
| TC-LOG-2  | 3 экз. -> 5 экз.                |     0     |     3     |     200      |         100          |
| TC-LOG-3  | 5 экз.                          |     0     |     5     |     200      |         100          |
| TC-LOG-4  | 6 экз. -> 10 экз.               |     0     |     6     |     200      |         150          |
| TC-LOG-5  | 10 экз.                         |     0     |    10     |     200      |         150          |
| TC-LOG-6  | 12 экз. -> 15 экз.              |     0     |    12     |     200      |         200          |
| TC-LOG-7  | 1 экз. -> 5 экз.   (уже есть 2) |     2     |     1     |     200      |          65          |
| TC-LOG-8  | 3 экз. -> 5 экз.   (уже есть 5) |     5     |     3     |     200      |          50          |
| TC-LOG-9  | 5 экз.             (уже есть 4) |     4     |     5     |     200      |          50          |
| TC-LOG-10 | 6 экз. -> 10 экз.  (уже есть 1) |     1     |     6     |     200      |         130          |
| TC-LOG-11 | 10 экз.            (уже есть 6) |     6     |    10     |     200      |         100          |
| TC-LOG-12 | 12 экз. -> 15 экз. (уже есть 3) |     3     |    12     |     200      |         205          |


---
## Группа 3: Позитивное тестирование
### Предусловия:
* Пользователь авторизован и имеет действующий токен аутентификации.
* Токен аутентификации получен и передан в параметр запроса {authToken}.
* Существует валидный productId для тестирования.
### Шаги:
1) Установить значения в параметрах запроса "start" и "count" согласно таблице. (см. "Ожидаемые результаты")
2) Отправить GET-запрос на эндпоинт /products/{productId}/cost?authToken=&count=&start= с указанными параметрами.
### Ожидаемые результаты:

| **Номер** | **Описание теста**      | **start** | **count** | **HTTP-код** | **Body, {"cost": }** | 
|-----------|-------------------------|:---------:|:---------:|:------------:|:--------------------:|
| TC-POS-1  | минимальный start       |     0     |     3     |     200      |         100          |
| TC-POS-2  | середина start          |     3     |     1     |     200      |          55          |
| TC-POS-3  | граница start           |     5     |    11     |     200      |         150          |
| TC-POS-4  | большой start           |   1561    |     6     |     200      |         100          |
| TC-POS-5  | минимальный count       |     2     |     1     |     200      |          65          |
| TC-POS-6  | без округления count    |     0     |     5     |     200      |         100          |
| TC-POS-7  | большой count           |     6     |   1024    |     200      |        10250         |
| TC-POS-8  | комбинация границ       |     5     |     5     |     200      |          50          |
| TC-POS-9  | min + комбинация границ |     0     |     1     |     200      |         100          |

---
## Группа 4: Негативное тестирование
### Предусловия:
* Существуют заведомо валидный токен authToken (пр. Abcdef1234567890) 
* Существует заведомо валидное значения productId (пр. 123)
### Шаги:
1) Установить значения start, count, productId и authToken согласно таблице (см. "Ожидаемые результаты")
2) Отправить GET-запрос на эндпоинт /products/{productId}/cost?authToken=&count=&start= с указанными параметрами.
### Ожидаемые результаты:

| **Номер** | **Описание теста**                   | **start**     |   **count**   | **productId** |  **authToken**   | **HTTP-код** | 
|-----------|--------------------------------------|:--------------|:-------------:|:--------------|:----------------:|:------------:|
| TC-NEG-1  | Отрицательный start                  | -3            |       5       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-2  | Дробный start                        | 2.14          |       5       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-3  | String start                         | "4"           |       5       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-4  | null start                           | null          |       5       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-5  | Отсутствующий start                  | (отсутствует) |       5       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-6  | Нулевой count                        | 0             |       0       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-7  | Отрицательный count                  | 0             |      -5       | 123           | Abcdef1234567890 |     500      |
| TC-NEG-8  | Дробный count                        | 0             |     4.51      | 123           | Abcdef1234567890 |     500      |
| TC-NEG-9  | String count                         | 0             |     "10"      | 123           | Abcdef1234567890 |     500      |
| TC-NEG-10 | null count                           | 0             |     null      | 123           | Abcdef1234567890 |     500      |
| TC-NEG-11 | Отсутствующий count                  | 0             | (отсутствует) | 123           | Abcdef1234567890 |     500      |
| TC-NEG-12 | Несущ. productId                     | 0             |       5       | 9999          | Abcdef1234567890 |     404      |
| TC-NEG-13 | String сущ. productId                | 0             |       5       | "123"         | Abcdef1234567890 |     404      |
| TC-NEG-14 | Отрицательный от сущ. productId      | 0             |       5       | -123          | Abcdef1234567890 |     404      |
| TC-NEG-15 | Отсутствующий productId              | 0             |       5       | (отсутствует) | Abcdef1234567890 |     404      |
| TC-NEG-16 | Не валидный токен по кол-ву символов | 0             |       5       | 123           |   Abcdef12345    |     401      |
| TC-NEG-17 | Не валидный токен из-за спецсимвола  | 0             |       5       | 123           | Ab@def1234#67890 |     401      |
| TC-NEG-18 | Отсутствующий токен                  | 0             |       5       | 123           |  (отсутствует)   |     401      |

---
## Группа 5: Тестирование статус кодов и форматов ответов
### Предусловия:
* Существуют заведомо валидный токен authToken (пр. Abcdef1234567890)
* Существует заведомо валидное значения productId (пр. 123)
### Шаги:
1) Установить значения start, count, productId и authToken согласно таблице (см. "Ожидаемые результаты")
2) Отправить GET-запрос на эндпоинт /products/{productId}/cost?authToken=&count=&start= с указанными параметрами.
### Ожидаемые результаты:

| **Номер** | **Описание теста**   | **start** | **count** | productId |    authToken     | **HTTP-код**  |         **Body**         |
|-----------|----------------------|:----------|:---------:|:---------:|:----------------:|:-------------:|:------------------------:|
| TC-COD-1  | Успешный запрос      | 0         |     5     |    123    | Abcdef1234567890 |      200      |    {"cost": number }     |
| TC-COD-2  | Неверный токен       | 0         |     5     |    123    | InvalidToken123  |      401      | (соответствует формату)  |
| TC-COD-3  | Отсутствующий токен  | 0         |     5     |    123    |  (отсутствует)   |      401      | (соответствует формату)  |
| TC-COD-4  | Продукт не найден    | 0         |     5     |   9999    | Abcdef1234567890 |      404      | (соответствует формату)  |
| TC-COD-5  | Внутренняя ошибка    | null      |   null    |    123    | Abcdef1234567890 |      500      | {"errorMessage": "..."}  |

---